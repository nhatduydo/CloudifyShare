{% extends "base.html" %}

{% block title %}L∆∞u tr·ªØ c√° nh√¢n ‚Äî CloudifyShare{% endblock %}

{% block content %}
<div class="flex flex-col md:flex-row gap-6">

  <section class="flex-1 bg-white rounded-lg shadow-sm p-6">
    <div class="flex justify-between items-center mb-6">
      <h2 class="text-xl font-semibold text-gray-800">‚òÅÔ∏è L∆∞u tr·ªØ c·ªßa t√¥i</h2>
      <div class="flex items-center gap-2">
        <input type="text" id="searchFile" placeholder="T√¨m ki·∫øm t·ªáp..." class="border rounded px-3 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500">
        <label class="bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded cursor-pointer text-sm">
          <input type="file" id="fileUpload" class="hidden">
          ‚¨ÜÔ∏è T·∫£i l√™n
        </label>
      </div>
    </div>

    <!-- File list -->
    <div id="fileList" class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
      <!-- V√≠ d·ª• file -->
      <div class="border rounded-lg p-4 flex flex-col items-center text-center hover:shadow-md transition">
        <div class="text-5xl mb-2">üìÑ</div>
        <p class="font-medium text-gray-700 truncate w-full">bao_cao_do_an.pdf</p>
        <p class="text-xs text-gray-500">2.4 MB ‚Ä¢ 27/10/2025</p>
        <div class="flex gap-2 mt-3">
          <button class="text-sm text-indigo-600 hover:underline">T·∫£i xu·ªëng</button>
          <button class="text-sm text-red-500 hover:underline">X√≥a</button>
        </div>
      </div>

      <div class="border rounded-lg p-4 flex flex-col items-center text-center hover:shadow-md transition">
        <div class="text-5xl mb-2">üñºÔ∏è</div>
        <p class="font-medium text-gray-700 truncate w-full">avatar.png</p>
        <p class="text-xs text-gray-500">850 KB ‚Ä¢ 25/10/2025</p>
        <div class="flex gap-2 mt-3">
          <button class="text-sm text-indigo-600 hover:underline">T·∫£i xu·ªëng</button>
          <button class="text-sm text-red-500 hover:underline">X√≥a</button>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
<script>
document.getElementById('fileUpload').addEventListener('change', (e) => {
  const file = e.target.files[0]
  if (file) {
    alert(`B·∫°n ƒë√£ ch·ªçn file: ${file.name}`)
    // TODO: G·ª≠i file qua API Flask ƒë·ªÉ upload Cloudinary / Firebase Storage
  }
})

document.getElementById('searchFile').addEventListener('input', (e) => {
  const keyword = e.target.value.toLowerCase()
  const files = document.querySelectorAll('#fileList > div')
  files.forEach(card => {
    const name = card.querySelector('p.font-medium').textContent.toLowerCase()
    card.style.display = name.includes(keyword) ? '' : 'none'
  })
})
</script>
{% endblock %}
